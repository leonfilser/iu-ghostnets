<?xml version='1.0' encoding='UTF-8' ?>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title>Shea Sepherd</title>
        <link rel="icon" type="image/x-icon" href="media/favicon.ico" />
        <link rel="stylesheet" type="text/css" media="screen" href="style.css"/>
    </h:head>

    <body>
        <div class="main-container">
            <h1 class="report-title">Neues Geisternetz melden</h1>

            <h:form id="reportForm">
                <h:panelGrid class="report-grid" columns="2" cellpadding="5">
                    

                    <h:outputText value="Sichtungszeitpunkt" />
                    <p:calendar 
                        id="sightingDate" 
                        value="#{ghostnetController.ghostnet.sightingDate}" 
                        pattern="dd.MM.yyyy" 
                        required="true"
                        showOn="button" 
                        maxdate="#{dateBean.currentDate}" 
                        mask="true" 
                        title="Sichtungszeitpunkt"
                        requiredMessage="Bitte geben Sie ein Datum im Format TT.MM.JJJJ an." 
                        validatorMessage="Das Datum darf nicht in der Zukunft liegen." />
                    <!-- -->
                    <h:message for="sightingDate" class="error-message"/>


                    <h:outputText value="Breitengrad" />
                    <p:inputText 
                        id="latitude" 
                        value="#{ghostnetController.ghostnet.latitude}" 
                        type="number" 
                        title="Breitengrad" 
                        required="true"
                        requiredMessage="Bitte geben Sie einen Breitengrad zwischen -90 und 90 an." 
                        validatorMessage="Bitte geben Sie einen Breitengrad zwischen -90 und 90 an.">
                        <f:validateDoubleRange minimum="-90" maximum="90" />
                    </p:inputText>
                    <!-- -->
                    <h:message for="latitude" class="error-message" />


                    <h:outputText value="Längengrad" />
                    <p:inputText 
                        id="longitude" 
                        value="#{ghostnetController.ghostnet.longitude}" 
                        type="number" 
                        title="Längengrad" 
                        required="true"
                        requiredMessage="Bitte geben Sie einen Längengrad zwischen -180 und 180 an." 
                        validatorMessage="Bitte geben Sie einen Längengrad zwischen -180 und 180 an.">
                        <f:validateDoubleRange minimum="-180" maximum="180" />
                    </p:inputText>
                    <!-- -->
                    <h:message for="longitude" class="error-message" />


                    <h:outputText value="Größe in m²" />
                    <p:inputText 
                        id="size" 
                        value="#{ghostnetController.ghostnet.size}" 
                        type="number" 
                        title="Größe in m²" 
                        required="true"
                        requiredMessage="Bitte geben Sie die Größe des Geisternetzes in Quadratmetern an." 
                        validatorMessage="Die Größe muss zwischen 1 und 5000 Quadratmetern liegen.">
                        <f:validateLongRange minimum="1" maximum="5000" />
                    </p:inputText>
                    <!-- -->
                    <h:message for="size" class="error-message" />


                    <h:outputText value="Telefonnummer" />
                    <p:inputText 
                        id="phoneNumber" 
                        value="#{ghostnetController.ghostnet.reporterPhoneNumber}" 
                        placeholder="(optional)" 
                        type="tel"
                        title="Telefonnummer"
                        validatorMessage="Bitte geben Sie eine gültige Telefonnummer ein (z.B. +49 123 456 789).">
                        <f:validateLength minimum="5" maximum="20" />
                        <f:validateRegex pattern="^\+?[0-9]{1,3}?[-. ]?(\(?\d{1,4}\)?)?[-. ]?\d{1,4}[-. ]?\d{1,4}[-. ]?\d{1,9}$" />
                    </p:inputText>
                    <!-- -->
                    <h:message for="phoneNumber" class="error-message" />

                </h:panelGrid>

                <div class="submit-button-container">
                    <!-- Abbrechen Button -->
                    <p:button
                        class="secondary-button big-button"
                        icon="pi pi-times"
                        iconPos="left"
                        value="Abbrechen" 
                        outcome="index" />

                    <!-- Melden Button -->
                    <p:commandButton
                        class="primary-button big-button"
                        icon="pi pi-flag"
                        iconPos="right"
                        value="Neues Geisternetz melden" 
                        action="#{ghostnetController.addGhostnet}" 
                        ajax="true" 
                        update="reportForm" />
                </div>
            </h:form>
        </div>
    </body>
</html>
