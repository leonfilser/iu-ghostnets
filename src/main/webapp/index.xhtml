<?xml version='1.0' encoding='UTF-8' ?>

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title>Shea Shepherd</title>
        <link rel="icon" type="image/x-icon" href="media/favicon.ico" />
        <link rel="stylesheet" type="text/css" media="screen" href="style.css"/>
    </h:head>

    <h:body>
        <div class="main-container">

            <a href="index.xhtml"><img class="home-logo" src="media/logo.png" alt="Shea Shepherd Logo"/></a>

            <h1 class="home-title">Shea Shepherd</h1>
            <h2 class="home-subtitle">Geisternetze bergen - Meere bewahren</h2>

            <div class="cta-btn-container">

                <h:panelGroup rendered="#{sessionHandler.loggedIn}">
                    <h:outputText value="Willkommen, #{sessionHandler.user.firstName}!" />
                </h:panelGroup>

                <p:button class="cta-btn-melden" value="Geisternetz Melden" outcome="report"/>
                
                <h:panelGroup rendered="#{!sessionHandler.loggedIn}">
                    <p:button class="cta-btn-bergen" value="Einloggen/Registrieren" outcome="auth"/>
                </h:panelGroup>

                <h:panelGroup rendered="#{sessionHandler.loggedIn}">
                    <p:button class="cta-btn-bergen" value="Zum Dashboard" outcome="userdash"/>
                </h:panelGroup>
            </div>

            <div class="toggle-container">
                <h3>Jüngste Sichtungen</h3>
            </div>
            
            <h:panelGroup id="indextable">
                <p:dataTable value="#{ghostnetController.ghostnetList}" var="singleGhostnetItem" sortOrder="ascending" sortBy="#{singleGhostnetItem.sightingDate}" rows="5" >
                    
                    <p:column headerText="Gesichtet">
                        <h:outputText value="#{singleGhostnetItem.sightingDate}">
                            <f:convertDateTime pattern="dd.MM.yyyy" />
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Geschätzte Größe">
                        <h:outputText value="#{singleGhostnetItem.size} m²" />
                    </p:column>

                    <p:column headerText="Status">
                        <h:outputText value="#{singleGhostnetItem.currentState}" />
                    </p:column>


                    <p:column headerText="Koordinaten">
                        <h:outputLink value="https://maps.google.com/?q=#{singleGhostnetItem.latitude},#{singleGhostnetItem.longitude}" target="_blank">
                            <h:outputText value="#{singleGhostnetItem.latitude}, #{singleGhostnetItem.longitude}" />
                        </h:outputLink>
                    </p:column>

                </p:dataTable>

                <p:dataTable value="#{webapp.ghostnetList}" var="singleGhostnetItem" rendered="#{selectBooleanView.indexTableToggle}">
                    <p:column headerText="Gesichtet">
                        <h:outputText value="#{singleGhostnetItem.sightingDate}">
                            <f:convertDateTime pattern="dd.MM.yyyy" />
                        </h:outputText>
                    </p:column>
                </p:dataTable>
            </h:panelGroup>


            <!-- AIzaSyByc5iV0jHwB75MGAAx6ZESPKq0qp-iPjs -->
            <script src="https://maps.google.com/maps/api/js?key=AIzaSyByc5iV0jHwB75MGAAx6ZESPKq0qp-iPjs&amp;sensor=true"></script>

            
            <div class="card">
                <p:gmap center="36.890257,30.707417" zoom="13" type="HYBRID" style="width:100%;height:400px" />
            </div>
        </div>
    </h:body>
</html>